<!--
    Looks like Mazemap only supports regular javascript, not React
-->

<html>
    <head>
        <link rel="stylesheet" href="https://api.mazemap.com/js/v2.0.28/mazemap.min.css">
        <script type='text/javascript' src='https://api.mazemap.com/js/v2.0.28/mazemap.min.js'></script>
        <style>
            .mazemap, body, html, map {
                height: 100%;
                width: 100%;
            }
        </style>
    </head>
    <body>
    <div id="map" class="mazemap"></div>

    <script>
        Mazemap.mapboxgl.accessToken = 'pk.eyJ1IjoibHVjcmF4IiwiYSI6ImNrdjVhMngxcjduajYycHQ5aXhrOGQybXIifQ.YLr5is212pFMMWy56WcP0Q';
        var myMap = new Mazemap.Map({
            // container id specified in the HTML
            container: 'map',
            campuses: 1,
            style: 'mapbox://styles/mapbox/light-v10',
            center: {lng: -122.2639213, lat: 37.8645876},
            bearing: 17.514266117970237,
            pitch: 55.5,
            zoom: 17.567747750432794,
            zLevel: 1,
            hash: true
        });

        myMap.on('load', () => {
            myMap.addSource('heatpoints', {
                "type": "geojson",
                "data": {
                    "type": "FeatureCollection",
                    "features": [
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639213, 37.8645876]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639211, 37.8646001]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639199, 37.8645876]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639213, 37.8645876]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [ -122.2639057, 37.8645871]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639176, 37.8645911]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639057, 37.8645871]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639009, 37.864591]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639057, 37.8645871]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639057, 37.8645871]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639057, 37.864592]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639157, 37.8646871]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639001, 37.8646981]
                            }
                        },
                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639170, 37.864661]
                            }
                        },

                        {
                            "type": "feature",
                            "geometry": {
                            "type": "Point",
                            "coordinates": [-122.2639170, 37.864661]
                            }
                        },

                        ],
                  }

            });


            myMap.addLayer(
                {
                'id': 'add-3d-buildings',
                'source': 'composite',
                'source-layer': 'building',
                'filter': ['==', 'extrude', 'true'],
                'type': 'fill-extrusion',
                'minzoom': 15,
                'paint': {
                'fill-extrusion-color': '#636e72',

                // Use an 'interpolate' expression to
                // add a smooth transition effect to
                // the buildings as the user zooms in.
                'fill-extrusion-height': [
                'interpolate',
                ['linear'],
                ['zoom'],
                15,
                0,
                15.05,
                ['get', 'height']
                ],
                'fill-extrusion-base': [
                'interpolate',
                ['linear'],
                ['zoom'],
                15,
                0,
                15.05,
                ['get', 'min_height']
                ],
                'fill-extrusion-opacity': 0.8
                }
              });




        myMap.addLayer({
            "id": "heatpoints",
            "type": "heatmap",
            "source": "heatpoints",
            "maxzoom": 22,
            "paint": {
                // Increase the heatmap weight based on frequency and property magnitude
                "heatmap-weight": 1,
                // Increase the heatmap color weight weight by zoom level
                // heatmap-intensity is a multiplier on top of heatmap-weight
                "heatmap-intensity": [
                    "interpolate",
                    ["linear"],
                    ["zoom"],
                    18, 0.2,
                    22, 1
                ],
                // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).
                // Begin color ramp at 0-stop with a 0-transparancy color
                // to create a blur-like effect.
                "heatmap-color": [
                    "interpolate",
                    ["linear"],
                    ["heatmap-density"],
                    0, "rgba(0,0,255,0)",
                    0.2, "#1FAFFC",
                    0.4, "#5BD76F",
                    0.6, "#FFE61E",
                    0.8, "#FF7B00",
                    1, "#FF3333"
                ],
                // Adjust the heatmap radius by zoom level
                "heatmap-radius": [
                    "interpolate",
                    ["linear"],
                    ["zoom"],
                    10, 5,
                    22, 30
                ],
                "heatmap-opacity": 0.6
            }
        });
    });

        // Add zoom and rotation controls to the map.
        map.addControl(new Mazemap.mapboxgl.NavigationControl());
    </script>
</body>
</html>
